image: Visual Studio 2017
version: libsfw2-{build}-{branch}

environment:
  matrix:
    - TYPE: "win-x64-installer"
  GH_TOKEN:
    secure: iMbtRmx3TSn7cy4D2D8+oSq3wO/1ZC6rHZ2rSKbz8CBuJcUb25hZpJJx79ghok1t

shallow_clone: false
clone_folder: C:\Projects\libsfw2

install:
- git submodule update --init --recursive
- ps: .\private\ci-tools\remove-apps.ps1
- git clone -q --branch=main https://github.com/danijeljw-RPC/optechx.DownloadFile.git C:\Projects\optechx.DownloadFile
- ps: .\private\ci-tools\install-tools.ps1

build_script:
- ps: |
    .\public\build_script.ps1