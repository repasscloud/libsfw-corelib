image: Visual Studio 2017
version: libsfw2-{build}

environment:
  matrix:
    - TYPE: "win-x64-installer"
  GH_TOKEN:
    secure: zihr6HxmFneq9foLEIVSebl2v1snXqyjGjdOWJZa3ZXmbTi2QajOBjMQjd5cCaVj

shallow_clone: false
clone_folder: C:\Projects\libsfw2

install:
- git submodule update --init --recursive
- ps: .\private\ci-tools\remove-apps.ps1
- git clone -q --branch=main https://github.com/danijeljw-RPC/optechx.DownloadFile.git C:\Projects\optechx.DownloadFile
- ps: .\private\ci-tools\install-tools.ps1
#- ps: .\private\ci-tools\load-functions.ps1


build_script:
- ps: |
    .\public\build_script.ps1