version: 1.0.{build}
shallow_clone: true
clone_folder: C:\Projects\libsfw
init:
- ps: >-
    Start-process -FilePath msiexec -ArgumentList '/X','{177B605A-B1E1-3197-B5D4-05F00C0174D1}','/q' -Wait;

    Start-Process -FilePath "C:\Program Files (x86)\Mozilla Maintenance Service\uninstall.exe" -ArgumentList '/S' -Wait

    Invoke-WebRequest -UseBasicParsing -Uri https://github.com/s3tools/s3cmd/releases/download/v2.2.0/s3cmd-2.2.0.zip -OutFile 'C:\Projects\s3cmd-2.2.0.zip'

    unzip 'C:\Projects\s3cmd-2.2.0.zip'

    Start-Process -FilePath python -ArgumentList 'C:\Projects\s3cmd-2.2.0\setup.py','install' -Wait
#install:
#- ps: >-
#    Get-ChildItem -Path .\apps -Recurse -Filter "*.ps1" | ForEach-Object { . $_.FullName }
#
#    Copy-Item -Path .\lib\ini_files\s3cmd.ini -Destination C:\Users\appveyor\AppData\Roaming\s3cmd.ini -Confirm:$false -Force
#
#    . .\lib\scripts\Find-InTextFile.ps1
#    
#    Find-InTextFile -FilePath 'C:\Users\appveyor\AppData\Roaming\s3cmd.ini' -Find 'UCOBCC2XCRM5DHFGX3__' -Replace 'UCOBCC2XCRM5DHFGX3VY'
#build_script:
#- ps: >-
#    python C:\Projects\s3cmd-2.2.0\s3cmd put C:\Projects\libsfw\apps\adobe\readerdc\adobe.readerdc.latest.json s3://usrdata-01/adobe/readerdc/adobe.readerdc.latest.json
test_script:
- ps: Write-Output "This is test script"
deploy_script:
- pwsh: Write-Output "This is deployment script"
on_success:
- ps: '[System.Console]::WriteLine("Success building")'
on_failure:
- ps: $blockRdp = $true; iex ((new-object net.webclient).DownloadString('https://raw.githubusercontent.com/appveyor/ci/master/scripts/enable-rdp.ps1'))
on_finish:
- ps: $blockRdp = $true; iex ((new-object net.webclient).DownloadString('https://raw.githubusercontent.com/appveyor/ci/master/scripts/enable-rdp.ps1'))


#'[System.Console]::WriteLine("Project finished building")'