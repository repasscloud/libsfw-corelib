version: 1.0.{build}
shallow_clone: false
clone_folder: C:\Projects\libsfw
init:
- ps: >-
    Start-process -FilePath msiexec -ArgumentList '/X','{177B605A-B1E1-3197-B5D4-05F00C0174D1}','/q' -Wait;

    Start-Process -FilePath "C:\Program Files (x86)\Mozilla Maintenance Service\uninstall.exe" -ArgumentList '/S' -Wait
install:
- ps: >-
    Get-ChildItem -Path . -Recurse -Filter "*.ps1" | ForEach-Object { $_.FullName }
build_script:
- ps: >-
    $PWD.Path;

    Get-ChildItem -Path C:\Projects\libsfw
test_script:
- ps: Write-Output "This is test script"
deploy_script:
- pwsh: Write-Output "This is deployment script"
on_success:
- ps: '[System.Console]::WriteLine("Success building")'
on_failure:
- ps: $blockRdp = $true; iex ((new-object net.webclient).DownloadString('https://raw.githubusercontent.com/appveyor/ci/master/scripts/enable-rdp.ps1'))
on_finish:
- ps: '[System.Console]::WriteLine("Project finished building")''